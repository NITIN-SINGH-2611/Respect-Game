Fix API URL handling and button functionality
